<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playlist</title>

    <!-- Tailwind vía CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .vidrio-estatico {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .sortable-ghost {
            opacity: 0.5;
            transform: scale(0.98);
            transition: all 0.3s ease;
        }
        .sortable-drag {
            transition: none;
        }
        .drag-handle:hover {
            color: rgba(255, 255, 255, 0.9);
        }
        .drag-handle:active {
            transform: scale(0.95);
        }
    </style>
</head>

<body class="min-h-screen bg-cover bg-center bg-fixed relative"
    style="background-image: url('https://w.wallhaven.cc/full/1k/wallhaven-1k6ljv.jpg');">

    <div class="pt-20 px-6 pb-8 flex flex-col items-center">
        <div class="vidrio-estatico w-full max-w-3xl mx-auto p-6 text-white">

            <!-- Título -->
            <h1 class="text-4xl font-bold text-center mb-6">Playlist de la Radio</h1>

            <!-- Agregar Canción -->
            <div class="vidrio-estatico p-5 mb-6">
                <h2 class="text-xl font-semibold mb-4">Agregar Canción</h2>

                <!-- Link -->
                <div class="mb-4">
                    <label class="block text-sm mb-2">Link (YouTube, Spotify, etc.)</label>
                    <div class="flex gap-2">
                        <input type="url" id="linkInput" placeholder="https://..." 
                            class="flex-1 bg-white/10 border border-white/20 rounded px-3 py-2 text-sm">
                        <button onclick="addByLink()" 
                            class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded text-sm transition">
                            Añadir
                        </button>
                        <button onclick="document.getElementById('linkInput').value=''" 
                            class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded text-sm transition">
                            Limpiar
                        </button>
                    </div>
                </div>

                <!-- Archivo -->
                <div>
                    <label class="block text-sm mb-2">Importar archivo</label>
                    <div class="flex gap-2 items-center">
                        <input type="file" id="fileInput" accept=".mp3,.mp4,.flac,.wav"
                            class="flex-1 bg-white/10 border border-white/20 rounded px-3 py-2 text-sm">
                        <button onclick="addByFile()" 
                            class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded text-sm transition">
                            Añadir
                        </button>
                        <button onclick="document.getElementById('fileInput').value=''" 
                            class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded text-sm transition">
                            Limpiar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lista de Reproducción -->
            <div class="vidrio-estatico p-5 mb-6 bg-black/30">
                <h3 class="text-lg font-semibold mb-4">Mis Canciones</h3>
                <div id="playlist" class="space-y-2">
                    <!-- Las canciones se agregarán aquí -->
                </div>
            </div>

            <!-- Botones de control -->
            <div class="flex justify-between">
                <button onclick="window.history.back()" 
                    class="bg-white/20 hover:bg-white/30 text-white px-6 py-2 rounded transition">
                    Atrás
                </button>
                <button onclick="savePlaylist()" 
                    class="bg-white/20 hover:bg-white/30 text-white px-6 py-2 rounded transition">
                    Guardar cambios
                </button>
            </div>
        </div>
    </div>

    <script>
        let playlist = [];
        let draggedElement = null;

        function createTrackElement(track, index) {
            const div = document.createElement('div');
            div.className = 'vidrio-estatico bg-white/10 p-3 flex items-center gap-3 rounded transition-all duration-300 ease-in-out';
            div.draggable = true;
            div.dataset.index = index;

            div.innerHTML = `
                <img src="${track.cover}" alt="" class="w-12 h-12 rounded object-cover">
                <div class="flex-1">
                    <div class="font-bold text-sm">${track.title}</div>
                    <div class="text-xs text-white/70">${track.artist} • ${track.duration}</div>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="removeTrack(${index})" 
                        class="text-white/60 hover:text-white/90 text-sm transition">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                    </button>
                    <div class="drag-handle cursor-grab text-white/40 hover:text-white/90 transition-colors duration-200">
                        <svg class="w-3 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </div>
                </div>
            `;

            // Drag events
            div.addEventListener('dragstart', handleDragStart);
            div.addEventListener('dragover', handleDragOver);
            div.addEventListener('drop', handleDrop);
            div.addEventListener('dragend', handleDragEnd);

            return div;
        }

        function addTrack(track) {
            playlist.push(track);
            renderPlaylist();
        }

        function renderPlaylist() {
            const container = document.getElementById('playlist');
            container.innerHTML = '';
            playlist.forEach((track, index) => {
                container.appendChild(createTrackElement(track, index));
            });
        }

        function removeTrack(index) {
            playlist.splice(index, 1);
            renderPlaylist();
        }

        // Placeholder functions for adding tracks
        function addByLink() {
            const link = document.getElementById('linkInput').value;
            if (link) {
                // Extraer datos del link (simulado)
                addTrack({
                    title: 'Canción desde Link',
                    artist: 'Artista Desconocido',
                    duration: '0:00',
                    cover: 'https://via.placeholder.com/48'
                });
            }
        }

        function addByFile() {
            const file = document.getElementById('fileInput').files[0];
            if (file) {
                // Extraer metadatos del archivo (simulado)
                addTrack({
                    title: file.name.replace(/\.[^/.]+$/, ""),
                    artist: 'Artista Desconocido',
                    duration: '0:00',
                    cover: 'https://via.placeholder.com/48'
                });
            }
        }

        function savePlaylist() {
            alert('Playlist guardada localmente');
            localStorage.setItem('playlist', JSON.stringify(playlist));
        }

        // Drag and Drop functionality
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('sortable-ghost');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetElement = e.target.closest('.vidrio-estatico');
            if (targetElement && targetElement !== draggedElement) {
                const targetIndex = parseInt(targetElement.dataset.index);
                const draggedIndex = parseInt(draggedElement.dataset.index);
                
                const temp = playlist[draggedIndex];
                playlist.splice(draggedIndex, 1);
                playlist.splice(targetIndex, 0, temp);
                
                renderPlaylist();
            }
        }

        function handleDragEnd(e) {
            e.target.classList.remove('sortable-ghost');
        }

        // Cargar playlist guardada
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('playlist');
            if (saved) {
                playlist = JSON.parse(saved);
                renderPlaylist();
            }
        });
    </script>
</body>
</html>